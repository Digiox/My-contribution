(this["webpackJsonpmy-contribution"]=this["webpackJsonpmy-contribution"]||[]).push([[0],{117:function(e,t,a){e.exports=a(162)},122:function(e,t,a){},123:function(e,t,a){},124:function(e,t,a){},126:function(e,t,a){},162:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),o=a(8),c=a.n(o),l=(a(122),a(123),a(102)),i=a(29),s=function(e){var t=e.type,a=e.children;switch(t){case"h1":return r.a.createElement("h1",null,a);case"h2":return r.a.createElement("h2",null,a);case"h3":return r.a.createElement("h3",null,a);case"h4":return r.a.createElement("h4",null,a);case"h5":return r.a.createElement("h5",null,a);case"h6":return r.a.createElement("h6",null,a);default:return r.a.createElement("h1",null,a)}},u=function(e){var t=e.src,a=e.alt;return r.a.createElement("img",{src:t,alt:a})},m=function(e){var t=e.onLoaded;return Object(n.useEffect)((function(){t()})),r.a.createElement(s,null,"Nous avons rencontr\xe9s des probl\xe8mes lors de la collecte de vos donn\xe9es")},p=(a(124),a(88)),d=a.n(p),f=function(){return r.a.createElement("div",{className:"page_not_Found_main"},r.a.createElement(u,{src:d.a,alt:"wrongPage"}),r.a.createElement(s,{type:"h2"},"OUPS ! La page que tu recherche n'existe pas !"))},h=a(63),g=a.n(h),E=a(89),b=a(14),v=a(16),O=a(194),j=a(207),y=a(208),w=a(201),_=a(209),S=a(100),k=a.n(S),N=a(101),x=a.n(N),C=a(214),P=a(104),I=a(197),T=(a(126),a(92)),B=a.n(T),A=a(94),D=a.n(A),z=a(64);a(127),a(129);a(132).config();z.initializeApp({apiKey:"AIzaSyBBC3jq66M04gzyGxT1IpZW3rxt_LFXENk",authDomain:"my-contribution-fa178.firebaseapp.com",databaseURL:"https://my-contribution-fa178.firebaseio.com",projectId:"my-contribution-fa178",storageBucket:"my-contribution-fa178.appspot.com",messagingSenderId:"394502965932",appId:"1:394502965932:web:ffe012a24d3f9f3a8f2d09",measurementId:"G-549XSR6D0K"});var U=z,L=Object(O.a)((function(e){return{button:{margin:e.spacing(1),width:"20%"},centeredEmptyListMessage:{display:"flex",alignItems:"center",width:"100%",flexDirection:"column"},modal:{display:"flex",alignItems:"center",justifyContent:"center"},paper:{backgroundColor:e.palette.background.paper,padding:e.spacing(2,4,3)}}})),M=U.firestore(),W=function(){var e=L();return r.a.createElement("div",{className:e.centeredEmptyListMessage},r.a.createElement("h2",null,"Oops, Our dataBase seems to be empty, It may just be temporary"),r.a.createElement(I.a,{variant:"contained",color:"primary",size:"large",className:e.button,startIcon:r.a.createElement(D.a,null),onClick:function(){M.collection("repos").add({data1:"i am a DATA",link:"iamalink.com",age:30}).then((function(e){console.log("Datas successfully added => id = ",e.id)})).catch((function(e){console.error("Error adding document: ",e)}))}},"Add a new project to our dataBase"))},J=a(199),R=a(202),V=a(200),G=Object(O.a)({root:{minWidth:275},bullet:{display:"inline-block",margin:"0 2px",transform:"scale(0.8)"},title:{fontSize:14},pos:{marginBottom:12}}),F=function(e){var t=G();return r.a.createElement(J.a,{className:t.root},r.a.createElement(V.a,null,r.a.createElement(w.a,{className:t.title,color:"textSecondary",gutterBottom:!0},e.repoPath),r.a.createElement(w.a,{variant:"h5",component:"h2"},e.repoName),r.a.createElement(w.a,{className:t.pos,color:"textSecondary"},e.repoUrl),r.a.createElement(w.a,{variant:"body2",component:"p"},e.repoDesc?e.repoDesc:"Un repo public de ".concat(e.repoOwner))),r.a.createElement(R.a,null,r.a.createElement("a",{href:e.repoUrl,target:"_blank",rel:"noopener noreferrer"},r.a.createElement(I.a,{size:"small"},"Voir le repo..."))))},K=Object(O.a)({root:{display:"flex",flexWrap:"wrap"}}),q=function(e){var t=K();return r.a.createElement("div",{className:t.root},e.datas.length<1?r.a.createElement(W,null):e.datas.map((function(e,t){return r.a.createElement(F,{key:t,repoOwner:e.repoOwner,repoPath:e.repoPath,repoName:e.repoName,repoUrl:e.repoUrl,repoDesc:e.repoDesc})})))},X=a(211),Y=a(95),Z=a.n(Y),$=a(65);var H={userToken:null,userProfileObject:null};var Q=a(96),ee=Object(Q.a)((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:H,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SAVE_TOKEN":return Object($.a)({},e,{userToken:t.value});case"SAVE_USER_PROFILE":return Object($.a)({},e,{userProfileObject:t.value});default:return e}}),{userToken:window.localStorage.getItem("token"),userProfileObject:JSON.parse(window.localStorage.getItem("user"))}),te=a(205);var ae=a(210),ne=a(212),re=a(98),oe=a.n(re),ce=U.firestore();var le=a(38),ie=Object(O.a)((function(e){return{form:{display:"flex",flexDirection:"column"},selectPlaceholder:{textAlign:"center"},submitProjectButton:{marginTop:"3%"}}})),se=function(e){var t=e.userDatas,a=e.onLoaded,o=ie(),c=r.a.useState(""),l=Object(b.a)(c,2),i=l[0],s=l[1],u=r.a.useState(null),m=Object(b.a)(u,2),p=m[0],d=m[1],f=Object(le.useToasts)().addToast;return Object(n.useEffect)((function(){a(!0)})),r.a.createElement("form",{className:o.form},r.a.createElement(ne.a,{defaultValue:t.userName,variant:"outlined"}),r.a.createElement(ae.a,{onChange:function(e){s(e.target.value),t.repos.forEach((function(t){t.name===e.target.value&&d({repoName:t.name,repoUrl:t.html_url,repoDesc:t.description,repoPath:t.full_name,repoOwner:t.owner.login})}))},value:i,displayEmpty:!0},r.a.createElement(C.a,{value:"",disabled:!0},r.a.createElement("p",{className:o.selectPlaceholder},"S\xe9lectionner un repo")),t.repos.map((function(e){return r.a.createElement(C.a,{key:e.id,value:e.name},e.name)}))),null!==p&&r.a.createElement("div",null,r.a.createElement("h2",null,"Aper\xe7u"),r.a.createElement(F,{repoOwner:p.repoOwner,repoPath:p.repoPath,repoName:p.repoName,repoUrl:p.repoUrl,repoDesc:p.repoDesc}),r.a.createElement(I.a,{variant:"contained",color:"default",onClick:function(){var e;(e=p,new Promise((function(t,a){ce.collection("repos").doc(e.repoName).set(e).then((function(){return t("success")})).catch((function(e){return a(e)}))}))).then((function(e){return f("Your project has been succefully added",{appearance:"success"})})).catch((function(e){return f("Your project is already in our database...",{appearance:"error"})}))},className:o.submitProjectButton,startIcon:r.a.createElement(oe.a,null)},"Upload")))},ue=Object(O.a)((function(e){return{loadingWrapper:{margin:"auto",textAlign:"center"}}})),me=function(e){var t=ue(),a=Object(n.useState)({}),o=Object(b.a)(a,2),c=o[0],l=o[1],i=Object(n.useState)(!1),s=Object(b.a)(i,2),u=s[0],p=s[1],d=Object(n.useState)(!1),f=Object(b.a)(d,2),h=f[0],g=f[1];console.log(u);var E=function(){var e=ee.getState().userToken,t=ee.getState().userProfileObject.login;p(!1),Z.a.get("https://api.github.com/user/repos",{headers:{Authorization:"Bearer "+e}}).then((function(e){var a,n;(a=t,n=e.data,new Promise((function(e,t){a&&n||t("undefined parameters"),e({userName:a,repos:n})}))).then((function(e){l(e)})).catch((function(e){return g(!0)}))})).catch((function(e){return g(!0)}))};Object(n.useEffect)((function(){c.repos||E()}),[l,c]);return r.a.createElement(le.ToastProvider,null,h?r.a.createElement((function(){var t=Object(le.useToasts)().addToast;return console.log(e),r.a.createElement(m,{onLoaded:function(){u||(console.log("test"),t("Une erreur est survenue lors du chargement de vos donn\xe9es",{appearance:"error"}),p(!0))},userDatas:c})}),null):r.a.createElement("div",null,c.repos?r.a.createElement((function(e){var t=Object(le.useToasts)().addToast;return console.log(e),r.a.createElement(se,{onLoaded:function(){u||(console.log("test"),t("Vos donn\xe9es ont \xe9t\xe9 charg\xe9es avec succ\xe8s",{appearance:"success"}),p(!0))},userDatas:c})}),null):r.a.createElement("div",{className:t.loadingWrapper},r.a.createElement("h2",null,"Chargement des donn\xe9es..."),r.a.createElement("h4",null,"Nous r\xe9cup\xe9rons vos donn\xe9es github..."),r.a.createElement(te.a,null))))},pe=new U.auth.GithubAuthProvider;pe.addScope("public_repo").addScope("read:user");var de=function(){return U.auth().signInWithPopup(pe).then((function(e){var t,a;ee.dispatch((t=e.credential.accessToken,window.localStorage.setItem("token",t),{type:"SAVE_TOKEN",value:t})),ee.dispatch((a=e.additionalUserInfo.profile,window.localStorage.setItem("user",JSON.stringify(a)),{type:"SAVE_USER_PROFILE",value:a})),console.log(ee.getState())})).catch((function(e){console.log(e.message)}))},fe=function(){return r.a.createElement("div",null,r.a.createElement("h2",null,"Connectez-vous avec Github"),r.a.createElement(I.a,{onClick:function(){return de()},variant:"contained",color:"primary"},"Je me connecte"))},he=Object(O.a)((function(e){return{paper:{position:"absolute",width:400,backgroundColor:e.palette.background.paper,border:"2px solid #000",boxShadow:e.shadows[5],padding:e.spacing(2,4,3)}}})),ge=function(e){var t=he(),a=Object(n.useState)(!1),o=Object(b.a)(a,2),c=o[0],l=o[1],i=Object(n.useState)(null),s=Object(b.a)(i,2),u=s[0],m=s[1];Object(n.useEffect)((function(){null===u&&U.auth().onAuthStateChanged((function(e){e&&m(e)})),!0===e.show?!c&&p():c&&d()}));var p=function(){l(!0),e.callBack(!0)},d=function(){l(!1),e.callBack(!1)};return r.a.createElement(X.a,{"aria-labelledby":"simple-modal-title","aria-describedby":"simple-modal-description",open:c,onClose:function(){return d()}},r.a.createElement("div",{className:t.paper},u?r.a.createElement(me,{userData:u}):fe()))},Ee=a(163),be=a(206),ve=a(2),Oe=function(e){var t=e.children,a=Object(ve.a)(e,["children"]);return r.a.createElement("button",a,t)},je=a(99),ye=Object(O.a)((function(e){return{modal:{display:"flex",alignItems:"center",justifyContent:"center"},paper:{backgroundColor:e.palette.background.paper,border:"2px solid #000",boxShadow:e.shadows[5],padding:e.spacing(2,4,3),margin:e.spacing(0,2),textAlign:"center"}}})),we=function(){var e=ye(),t=Object(n.useState)(!1),a=Object(b.a)(t,2),o=a[0],c=a[1],l=function(){localStorage.setItem("popupAccepted",!0),c(!1)};Object(n.useEffect)((function(){!JSON.parse(localStorage.getItem("popupAccepted"))&&je.isMobileOnly&&c(!0)}),[]);var i=r.a.createElement("div",null,r.a.createElement("p",null,"Pour une experience optimale, il est conseill\xe9 d'utiliser My contribution sur un ordinateur"),r.a.createElement(Oe,{onClick:l},"J'ai compris!"));return r.a.createElement(X.a,{open:o,onClose:l,className:e.modal,"aria-labelledby":"simple-modal-title","aria-describedby":"simple-modal-description",closeAfterTransition:!0,BackdropComponent:be.a,BackdropProps:{timeout:500}},r.a.createElement(Ee.a,{in:o,className:e.paper},i))},_e=Object(O.a)((function(e){return{root:{flexGrow:1,zIndex:0},menuButton:{marginRight:e.spacing(2)},title:{flexGrow:1},main_body_section:{marginTop:"5%",justifyContent:"center",display:"flex",marginBottom:"30px"},main_img_container:Object(v.a)({position:"relative",display:"flex",justifyContent:"center",width:"30%"},e.breakpoints.only("xs"),{fontSize:"0.9em",width:"70%"}),main_intro_text:{position:"absolute",top:"25%"},main_intro_img:{width:"100%"},sectionTitle_main_content:{display:"flex",width:"100%",backgroundColor:"#3F51B5",justifyContent:"space-between"},main_content_title:{padding:"10px",color:"white"},alert:{zIndex:"1000"}}})),Se=U.firestore();function ke(){var e=_e(),t=r.a.useState(null),a=Object(b.a)(t,2),o=a[0],c=a[1],l=Object(n.useState)([]),i=Object(b.a)(l,2),s=i[0],u=i[1],m=Object(n.useState)(!1),p=Object(b.a)(m,2),d=p[0],f=p[1],h=function(){c(null)};return Object(n.useEffect)((function(){ee.getState(),s.length<1&&Se.collection("repos").get().then((function(e){var t=[];e.forEach(function(){var e=Object(E.a)(g.a.mark((function e(a){return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.push(a.data());case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),u(t)}))})),r.a.createElement("div",{className:e.root},r.a.createElement(we,null),r.a.createElement(ge,{callBack:function(e){return f(e)},show:d}),r.a.createElement(j.a,{position:"static"},r.a.createElement(y.a,null,r.a.createElement(_.a,{edge:"start",className:e.menuButton,color:"inherit","aria-label":"menu"},r.a.createElement(k.a,null)),r.a.createElement(w.a,{variant:"h6",className:e.title},"My contribution"),r.a.createElement("div",null,r.a.createElement(_.a,{"aria-label":"account of current user","aria-controls":"menu-appbar","aria-haspopup":"true",onClick:function(e){c(e.currentTarget)},color:"inherit"},r.a.createElement(x.a,null)),r.a.createElement(P.a,{id:"menu-appbar",anchorEl:o,anchorOrigin:{vertical:"top",horizontal:"right"},keepMounted:!0,transformOrigin:{vertical:"top",horizontal:"right"},open:!1,onClose:h},r.a.createElement(C.a,{onClick:h},"Profile"),r.a.createElement(C.a,{onClick:h},"My account"))))),r.a.createElement("section",{className:e.main_body_section},r.a.createElement("div",{id:"main_div_img_container",className:e.main_img_container},r.a.createElement("img",{id:"main_intro_img",className:e.main_intro_img,src:B.a,alt:"versioning-img"}),r.a.createElement("h2",{className:e.main_intro_text},"Ne cherchez plus de projets, vous venez de les trouver"))),r.a.createElement("section",null,r.a.createElement("div",{className:e.sectionTitle_main_content},r.a.createElement("h2",{className:e.main_content_title},"Open source projects"),r.a.createElement(I.a,{onClick:function(){f(!0)},color:"secondary"},"Ajouter un projet")),r.a.createElement(q,{datas:s})))}var Ne=function(){return r.a.createElement(l.a,null,r.a.createElement(i.c,null,r.a.createElement(i.a,{exact:!0,path:"/"},r.a.createElement(ke,null)),r.a.createElement(i.a,{path:"/*"},r.a.createElement(f,null))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(r.a.createElement(Ne,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},88:function(e,t,a){e.exports=a.p+"static/media/undraw_page_not_found_su7k.6695af99.svg"},92:function(e,t,a){e.exports=a.p+"static/media/undraw_version_control_9bpv.bd6fb7a3.svg"}},[[117,1,2]]]);
//# sourceMappingURL=main.25d1c775.chunk.js.map